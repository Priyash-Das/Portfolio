let glowX=window.innerWidth/2,glowY=window.innerHeight/2,targetX=glowX,targetY=glowY,glowScale=1;const faces={home:{x:0,y:0},about:{x:0,y:-90},skills:{x:0,y:-180},experience:{x:0,y:-270},projects:{x:-90,y:0},contact:{x:90,y:0}};let currentFace="home",isRotating=!1;const cube=document.getElementById("cube"),buttons=document.querySelectorAll(".nav-btn");function initPreloader(){const t=document.getElementById("preloader"),e=document.getElementById("status-text"),i=document.querySelector(".portfolio-container");if(!t||!e||!i)return;const o=["INITIATING CORE SYSTEMS...","COMPILING PIXEL SHADERS...","DECRYPTING VIBE MATRIX...","AUTHENTICATION COMPLETE","SYSTEM ALMOST READY","Let's Guuu!!"],n=t=>new Promise((e=>setTimeout(e,t)));function a(){t.classList.add("hidden"),setTimeout((()=>{i.style.opacity="1";const t=document.getElementById("resume-overlay");t&&t.classList.remove("visible")}),50)}setTimeout((async function(){for(let t=0;t<o.length;t++){if(t===o.length-1)return await n(1200),e.classList.remove("typing"),e.textContent=o[t],void(e.style.borderRight="none");e.textContent=o[t],e.classList.add("typing"),await n(1e3),e.classList.remove("typing"),await n(200)}}),2200),window.addEventListener("load",(()=>setTimeout(a,12e3))),setTimeout(a,1e4)}function rotateCube(t){isRotating||(isRotating=!0,currentFace=t,document.querySelectorAll(".cube-face").forEach((t=>{t.classList.remove("active-face")})),document.querySelector(`.face-${t}`).classList.add("active-face"),cube.style.transform=`rotateX(${faces[t].x}deg) rotateY(${faces[t].y}deg) scale(1.02)`,buttons.forEach((t=>t.classList.remove("active"))),document.querySelector(`[onclick="rotateCube('${t}')"]`).classList.add("active"),setTimeout((()=>{cube.style.transform=`rotateX(${faces[t].x}deg) rotateY(${faces[t].y}deg) scale(1)`,isRotating=!1}),600))}function initParticles(){const t=document.getElementById("particles"),e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;const i=Array.from({length:50},(()=>({x:Math.random()*t.width,y:Math.random()*t.height,size:5*Math.random()+2,speedX:2*Math.random()-1,speedY:2*Math.random()-1,color:`rgba(110, 245, 232, ${.5*Math.random()+.2})`}))),o=document.getElementById("particles-trail"),n=o.getContext("2d");o.width=window.innerWidth,o.height=window.innerHeight;const a=[];let s=0,r=0,d=0,l=0,c=0;class h{constructor(t,e){this.x=t,this.y=e,this.size=5*Math.random()+2,this.speedX=1.5*Math.random()-.75,this.speedY=1.5*Math.random()-.75,this.accel=.98,this.life=80;const i=[213,174,215];this.hue=i[Math.floor(Math.random()*i.length)],this.color=`hsla(${this.hue}, 80%, 75%, ${.5*Math.random()+.5})`,this.glow=.3*Math.random()+.2,this.twist=.1*Math.random()-.05}update(){this.speedX*=this.accel,this.speedY*=this.accel,this.x+=this.speedX+Math.sin(this.life*this.twist),this.y+=this.speedY+Math.cos(this.life*this.twist),this.life--,this.size*=.97,this.color=`hsla(${this.hue}, 80%, 75%, ${this.life/80})`}draw(){n.beginPath(),n.arc(this.x,this.y,this.size,0,2*Math.PI),n.fillStyle=this.color,n.shadowBlur=15,n.shadowColor=this.color,n.fill()}}function m(){e.clearRect(0,0,t.width,t.height),i.forEach((i=>{e.beginPath(),e.arc(i.x,i.y,i.size,0,2*Math.PI),e.fillStyle=i.color,e.fill(),i.x+=i.speedX,i.y+=i.speedY,(i.x<0||i.x>t.width)&&(i.speedX*=-1),(i.y<0||i.y>t.height)&&(i.speedY*=-1)})),requestAnimationFrame(m)}function u(){n.clearRect(0,0,o.width,o.height),n.shadowBlur=0;for(let t=a.length-1;t>=0;t--)a[t].update(),a[t].draw(),(a[t].life<=0||a[t].size<.3)&&a.splice(t,1);requestAnimationFrame(u)}document.addEventListener("mousemove",(t=>{targetX=t.clientX,targetY=t.clientY,s=targetX,r=targetY,function(t,e){const i=Math.sqrt(Math.pow(s-d,2)+Math.pow(r-l,2)),o=Math.min(5+i/10,15);for(let i=0;i<o;i++)a.push(new h(t+10*Math.random()-5,e+10*Math.random()-5));d=t,l=e,c=(c+3)%360}(s,r)})),document.addEventListener("click",(t=>{for(let e=0;e<30;e++){const e=new h(t.clientX,t.clientY);e.speedX=4*Math.random()-2,e.speedY=4*Math.random()-2,e.size=8*Math.random()+3,a.push(e)}})),window.addEventListener("resize",(function(){t.width=o.width=window.innerWidth,t.height=o.height=window.innerHeight})),window.addEventListener("load",(()=>{rotateCube("home"),m(),u(),d=window.innerWidth/2,l=window.innerHeight/2}))}function animateCursorGlow(){const t=document.getElementById("custom-cursor"),e=targetX-glowX,i=targetY-glowY,o=Math.sqrt(e*e+i*i);glowX+=.1*e,glowY+=.1*i;const n=1+Math.min(.4,o/120);glowScale+=.1*(n-glowScale),t.style.left=`${glowX}px`,t.style.top=`${glowY}px`,t.style.transform=`translate(-50%, -50%) scale(${glowScale})`,requestAnimationFrame(animateCursorGlow)}function initResumeDownload(){const t=["INITIATING CONNECTION...","ACCESSING SECURE FILES...","DECRYPTING RESUME.PDF...","DOWNLOAD IMMINENT..."],e=t=>new Promise((e=>setTimeout(e,t)));[{btnId:"resume-download-btn",overlayId:"resume-overlay",glitchId:"glitch-text",barId:"progress-bar"},{btnId:"resume-download-btn-m",overlayId:"resume-overlay-m",glitchId:"glitch-text-m",barId:"progress-bar-m"}].forEach((({btnId:i,overlayId:o,glitchId:n,barId:a})=>{const s=document.getElementById(i),r=document.getElementById(o),d=document.getElementById(n),l=document.getElementById(a);s&&r&&d&&l&&s.addEventListener("click",(i=>{i.preventDefault(),async function({overlay:i,glitchText:o,progressBar:n,href:a}){i.classList.add("visible","visible-m"),await e(100);for(let i=0;i<t.length;i++){o.textContent=t[i],o.dataset.text=t[i];const a=(i+1)/t.length*100;n.style.width=`${a}%`,await e(750)}const s=document.createElement("a");s.href=a,s.setAttribute("download","Priyash-Resume.pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s),o.textContent="SENT! CHECK YOUR DOWNLOADS, FAM.",o.dataset.text="SENT! CHECK YOUR DOWNLOADS, FAM.",await e(2e3),i.classList.remove("visible","visible-m"),await e(500),n.style.width="0%",o.textContent="",o.dataset.text=""}({overlay:r,glitchText:d,progressBar:l,href:s.href})}))}))}document.addEventListener("DOMContentLoaded",(()=>{initPreloader(),initResumeDownload()})),initParticles(),animateCursorGlow();
